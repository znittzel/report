(function(e){e.fn.portfolio=function(t){var n={image:{width:600,height:400,margin:20},path:{width:10,height:10,marginTop:5,marginLeft:5},animationSpeed:400};var r=e.extend({},n,t);return this.each(function(){var t=e(this),n={init:function(){this.set.position();this.paths.draw();this.paths.go();this.animate.item()},set:{position:function(){t.find(".item").each(function(t){var n=e(this);n.css({left:(r.image.width+r.image.margin)*t+"px"});n.find("div").each(function(t){var n=e(this);n.css({top:(r.image.height+r.image.margin)*t+"px"})})})}},paths:{draw:function(){t.append(e("<div />").addClass("paths"));var n=t.find(".paths"),i=t.find(".item");i.each(function(t){var i=e(this),o=i.find("div");n.append(e("<div />").addClass("path"+t).css({width:r.path.width+"px",left:(r.path.width+r.path.marginLeft)*t+"px"}));o.each(function(i){e("<a />").attr({href:"#",rel:i}).css({width:r.path.width+"px",height:r.path.height+"px",top:(r.path.height+r.path.marginTop)*i+"px"}).appendTo(n.find(".path"+t))})});n.find(".path0").find("a").eq(0).addClass("active")},go:function(){t.find(".paths").find("a").click(function(){var i=e(this),o=t.find(".paths").find("a"),u=i.parent("div").attr("class").split("path")[1],a=i.attr("rel"),f=t.find(".inside"),l=a*(r.image.height+r.image.margin),c=u*(r.image.width+r.image.margin);f.animate({top:-l+"px",left:-c+"px"},r.animationSpeed,function(){n.position.get(f)});return false})},classes:function(n,r){var i=t.find(".paths").find("a"),s=i.filter(function(){var t=e(this),i=t.parent("div").attr("class").split("path")[1],s=t.attr("rel");return i==n&&s==r});i.removeClass("active");s.addClass("active")}},animate:{item:function(){var e={top:"-="+(r.image.height+r.image.margin)+"px"},t={top:"+="+(r.image.height+r.image.margin)+"px"},i={top:0,left:"-="+(r.image.width+r.image.margin)+"px"},o={top:0,left:"+="+(r.image.width+r.image.margin)+"px"};n.animate.img(".down",e,40);n.animate.img(".up",t,38);n.animate.img(".next",i,39);n.animate.img(".prev",o,37)},img:function(i,o,u){var a=t.find(".inside"),f=e.browser.mozilla?"keypress":"keydown";e(i).click(function(){var t=e(this);if(!t.hasClass("active")){a.animate(o,r.animationSpeed,function(){n.position.get(a);t.removeClass("active")})}t.addClass("active");return false});e(document).bind(f,function(t){var f=t.keyCode?t.keyCode:t.which;if(f==u&&e(i).is(":visible")){if(!a.is(":animated")){a.animate(o,r.animationSpeed,function(){n.position.get(a)})}}return false})}},position:{get:function(e){var t=e.position().top,r=e.position().left;n.position.check(t,r)},check:function(i,o){i=e.browser.msie&&parseInt(e.browser.version)==8&&i!=0?i-1:i;var u=t.find(".item"),a=u.length-1,f=-a*(r.image.width+r.image.margin),l=o*a/f,c=u.filter(function(){return parseInt(e(this).css("left"))==-o}),h=c.find("div").length-1,p=-h*(r.image.height+r.image.margin),d=i*h/p,v=t.find(".arrows"),m=v.find(".up"),g=v.find(".down"),y=v.find(".next"),b=v.find(".prev");if(o==f){y.hide()}else{y.show()}if(o<0){b.show()}else{b.hide()}if(i==p){g.hide()}else{g.show()}if(i<0){m.show()}else{m.hide()}n.paths.classes(l,d)}}};n.init()})}})(jQuery)