(function(e){function d(a){e("body").append('<div id="classybox"></div>'+'<div class="classybox-loader"></div>'+'<section class="classybox-wrap">'+'<h2 class="hide">ClassyBox Media Browser</h2>'+'<div class="content">'+'<div class="close">'+'<a href="#">close</a>'+"</div>"+'<div class="panel"></div>'+'<div class="next">'+'<a href="#"> Next</a>'+"</div>"+'<div class="prev">'+'<a href="#">Previous</a>'+"</div>"+"</div>"+"</section>");t=e("#classybox"),u=e(".classybox-loader"),n=e(".classybox-wrap"),r=e(".classybox-wrap").find(".content"),i=e(".classybox-wrap").find(".close"),Panel=e(".classybox-wrap").find(".panel"),s=e(".classybox-wrap").find(".next"),o=e(".classybox-wrap").find(".prev");n.contents().hide();n.hide();if(a.navigation){m(a);o.unbind().bind("click",function(){y(a);return false});s.unbind().bind("click",function(){b(a);return false});g(a)}t.fadeIn(a.speed/1.5);if(e(document).scrollTop()==0){p=h[0]-a.height/2}else{p=e(document).scrollTop()+h[0]-a.height/2}n.css({top:p+h[0]/1.6,left:h[1]});u.css({top:p+h[0]/2+u.height()/1.5,left:h[1]}).hide();n.fadeIn(500,function(){E(a,a.height,a.width,0);v(a)});e(window).resize(function(){E(a,l,c,0,1)});i.click(function(){S(a);return false});if(a.closeAnywhere){t.click(function(){S(a)})}}function v(t){var i=t.arrayEl[t.arrayActEl][0];if(i.indexOf("jpg",".")>0||i.indexOf("png",".")>0||i.indexOf("gif",".")>0){r.append("<div class='image'><img /></div>");u.fadeIn(200);n.find(".image img").hide();var s=new Image;s.onload=function(){n.find(".image img").attr("src",s.src);l=s.height,c=s.width;E(t,s.height,s.width);s.onload=function(){};u.fadeOut(400)};s.src=i;var o=t.arrayEl[t.arrayActEl][2];var a=t.arrayEl[t.arrayActEl][1];if(a){n.find(".image").append("<div class='text'><h1>"+a+"</h1></div>");n.hover(function(){e(this).find(".text").stop(true,true).delay(200).slideDown(200)},function(){e(this).find(".text").stop(true,true).delay(200).slideUp(180)})}if(o){n.find(".text").append("<div class='description'>"+o+"</div>")}}else{r.fadeIn(t.speed/1.5);l=t.height,c=t.width}if(i.indexOf("mp3",".")>0||i.indexOf("vmw",".")>0||i.indexOf("avi",".")>0||i.indexOf("mp4",".")>0){r.append("<div class='object'><div id='classybox-player'></div></div>");jwplayer("classybox-player").setup({file:i,width:t.width,height:t.height})}if(i.indexOf("youtube",".")>0){r.append("<div class='object'></div>");hrefY="http://www.youtube.com/embed/"+i.substring(31,42);n.find(".object").append("<iframe class='' type='text/html' width='"+t.width+"' height='"+t.height+"' src='"+hrefY+"' frameborder='0'></iframe>")}if(i.indexOf("vimeo",".")>0){r.append("<div class='object'></div>");hrefV=i.substr(-8);n.find(".object").append("<iframe src='http://player.vimeo.com/video/"+hrefV+"?title=0&byline=0&portrait=0' width='"+t.width+"' height='"+t.height+"' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>")}if(t.iframe){r.append("<iframe src='"+i+"' scrolling='auto' height='"+t.height+"' width='"+t.width+"' frameborder='0'></iframe>")}if(t.inline){r.append(e(i).html())}if(t.ajax!=0||i.indexOf("txt",".")>0||i.indexOf("js",".")>0){e.ajax({type:!t.ajaxType?"GET":t.ajaxType,url:i,data:t.ajaxData,success:!t.ajaxSuccess?function(e){r.append(e)}:t.ajaxSuccess})}if(i.indexOf("dailymotion",".")>0){var h=i.substring(33,39);r.append("<iframe frameborder='0' width='"+t.width+"' height='"+t.height+"' src='http://www.dailymotion.com/embed/video/"+h+"'></iframe>")}if(i.indexOf("5min",".")>0){var p=i.substr(-9);r.append("<object width='"+t.width+"' height='"+t.height+"' id='FiveminPlayer' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'><param name='allowfullscreen' value='true'/><param name='allowScriptAccess' value='always'/><param name='movie' value='http://embed.5min.com/"+p+"/'/><param name='wmode' value='opaque' /><embed name='FiveminPlayer' src='http://embed.5min.com/"+p+"/' type='application/x-shockwave-flash' width='"+t.width+"' height='"+t.height+"' allowfullscreen='true' allowScriptAccess='always' wmode='opaque'></embed></object>")}if(i.indexOf("metacafe",".")>0){var d=i.substr(30).slice(0,-1);r.append("<embed flashVars='playerVars=autoPlay=no' src='http://www.metacafe.com/fplayer/"+d+".swf' width='"+t.width+"' height='"+t.height+"' wmode='transparent' allowFullScreen='true' allowScriptAccess='always' name='Metacafe_"+d.substring(0,7)+"' pluginspage='http://www.macromedia.com/go/getflashplayer' type='application/x-shockwave-flash'></embed>")}if(i.indexOf("ustream",".")>0){var v=i.substring(31,39);r.append("<iframe frameborder='0' width='"+t.width+"' height='"+t.height+"' src='http://www.ustream.tv/embed/recorded/"+v+"' style='border: 0px none transparent;'></iframe>")}if(i.indexOf("hell",".")>0){var m=i.substring(28,33);r.append("<iframe width='"+t.width+"' height='"+t.height+"' src='http://www.hell.tv/embed/video/"+m+"' frameborder='0' scrolling='no' allowfullscreen></iframe>")}if(i.indexOf("vevo",".")>0){var g=i.substr(-12);r.append("<object width='"+t.width+"' height='"+t.height+"'><param name='movie' value='http://videoplayer.vevo.com/embed/Embedded?videoId="+g+"&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961&playerType=embedded&env=0&cultureName=en-US&cultureIsRTL=False'></param><param name='wmode' value='transparent'></param><param name='bgcolor' value='#000000'></param><param name='allowFullScreen' value='true'></param><param name='allowScriptAccess' value='always'></param><embed src='http://videoplayer.vevo.com/embed/Embedded?videoId="+g+"&playlist=false&autoplay=0&playerId=62FF0A5C-0D9E-4AC1-AF04-1D9E97EE3961 &playerType=embedded&env=0&cultureName=en-US&cultureIsRTL=False' type='application/x-shockwave-flash' allowfullscreen='true' allowscriptaccess='always' width='"+t.width+"' height='"+t.height+"' bgcolor='#000000' wmode='transparent'></embed></object>")}if(i.indexOf("myspace",".")>0){var y=i.substr(-9);r.append("<object width='"+t.width+"' height='"+t.height+"'><param name='allowFullScreen' value='true'/><param name='wmode' value='transparent'/><param name='movie' value='http://mediaservices.myspace.com/services/media/embed.aspx/m="+y+",t=1,mt=video'/><embed src='http://mediaservices.myspace.com/services/media/embed.aspx/m="+y+",t=1,mt=video' width='"+t.width+"' height='"+t.height+" allowFullScreen='true' type='application/x-shockwave-flash' wmode='transparent'></embed></object>")}if(t.social){var b="http://www.facebook.com/share.php?u="+window.location+"?cbox="+i,w="https://twitter.com/share?url="+window.location+"?cbox="+i,S="https://plus.google.com/share?url="+window.location+"?cbox="+i;Panel.append("<div class='fb'><a href='"+b+"' target='_blank'>Facebook</a></div><div class='tw'><a href='"+w+"' target='_blank'>Twitter</a></div><div class='gp'><a href='"+S+"' target='_blank'>Google plus</a></div>")}if(t.ads){r.append("<div class='adss'><div class='qa'><div class='closeads'><a href='#'></a></div></div></div>");f=r.find(".adss");e.ajax({type:"GET",url:t.ads,data:"",success:function(e){f.find(".qa").append(e);f.find(".qa").css({height:f.find(".contentadv").height(),width:f.find(".contentadv").width()})}});e(".adss .closeads a").click(function(){e(this).parents(".adss").remove();return false});f.delay(800).fadeIn(210)}}function m(e){if(e.arrayActEl!=0){o.css("top",e.height/2).show()}else{o.hide()}if(e.arrayActEl!=e.arrayEl.length-1){s.css("top",e.height/2).show()}else{s.hide()}w(e)}function g(t){if(t.keyboard){e(document.documentElement).unbind().bind("keyup",function(n){if(e.browser.msie){codeAscii=n.keyCode}else{codeAscii=n.keyCode}KeyCode=String.fromCharCode(codeAscii).toLowerCase();if(n.keyCode==37||KeyCode==t.keyPrev){y(t)}if(n.keyCode==39||KeyCode==t.keyNext){b(t)}if(n.keyCode==27||KeyCode==t.keyClose){S(t)}})}}function y(e){if(e.arrayActEl!=0){e.arrayActEl=e.arrayActEl-1;n.animate({left:"+="+e.width/1.5,opacity:0},e.speed/1.4,function(){r.contents().not(".next, .prev, .close, .panel").remove();Panel.contents().remove();n.animate({left:"-="+e.width*2.5,opacity:0},1).animate({opacity:1},e.speed/1.5);if(!r.find(".image").length){n.animate({left:h[1]-e.width/2},e.speed/1.5)}w(e);v(e);m(e)})}}function b(e){if(e.arrayActEl!=e.arrayEl.length-1){e.arrayActEl=e.arrayActEl+1;n.animate({left:"-="+e.width/1.5,opacity:0},e.speed/1.4,function(){r.contents().not(".next, .prev, .close, .panel").remove();Panel.contents().remove();n.animate({left:"+="+e.width*2.5,opacity:0},1).animate({opacity:1},e.speed/1.5);if(!r.find(".image").length){n.animate({left:h[1]-e.width/2},e.speed/1.5)}w(e);v(e);m(e)})}}function w(t){if(t.numberEl){e(".classybox-wrap .content .number").remove();if(t.arrayEl.length!=0){r.append("<div class='number'>"+(t.arrayActEl+1)+" / "+t.arrayEl.length+"</div>")}}}function E(t,i,u,f,p){h=x(t);var d=h[0]*1.6,v=h[1]*1.6,m=0;if(d>i||v>u){t.height=i;t.width=u}else{if(t.resize){r.find(".resize").remove();Panel.prepend("<div class='resize'><a href='#'>Resize</a></div>");a=r.find(".resize");a.find("a").click(function(){E(t,l,c,1);return false})}if(t.img&&!f||!f){if(i>d){m=d/i;t.height=i=d;t.width=u=u*m}if(u>v){m=v/u;t.height=i=i*m;t.width=u=v}}}n.animate({top:e(document).scrollTop()+h[0]-i/2,left:h[1]-u/2,width:u,height:i},!p?t.speed/1.5:0,function(){r.find(".image img, iframe, object").not(".adss iframe, .adss object").height(i).width(u);e(this).find(".image").contents().fadeIn(t.speed,function(){r.fadeIn(t.speed/1.7)})});s.animate({top:i/2},!p?50:0);o.animate({top:i/2},!p?50:0)}function S(e){arrPageSize=x();e.arrayEl.length=0;e.arrayActEl=0;r.fadeOut(e.speed/1.6,function(){n.animate({left:arrPageSize[1],top:arrPageSize[0],height:20,width:20},e.speed/1.3,function(){n.fadeOut(e.speed/1.2,function(){n.contents().remove();n.remove();t.fadeOut(e.speed/1.5,function(){t.remove()})})})})}function x(){var e=new Array;e[0]=document.documentElement.clientHeight/2;e[1]=document.documentElement.clientWidth/2;return e}function T(e){var t=window.document.URL.toString();if(t.indexOf("?")>0){var n=t.split("?"),r=n[1].split("&"),i=new Array(r.length),s=new Array(r.length),o=0;for(o=0;o<r.length;o++){var u=r[o].split("=");i[o]=u[0];if(u[1]!=""){s[o]=unescape(u[1])}else{s[o]="No Value"}}for(o=0;o<r.length;o++){if(i[o]==e){return s[o]}}return false}}e.fn.ClassyBox=function(t){t=e.extend({speed:400,height:450,width:650,arrayEl:[],arrayActEl:0,autoDetect:true,ads:"",img:1,iframe:false,inline:false,ajax:false,ajaxType:0,ajaxData:0,ajaxSuccess:0,title:true,navigation:true,keyboard:true,keyClose:"c",keyPrev:"p",keyNext:"n",numberEl:1,resize:true,social:true,closeAnywhere:true},t);var n=e(this);if(t.autoDetect&&T("cbox")){var r=T("cbox"),i=e('a[href*="'+unescape(r)+'"]');t.arrayEl.push(new Array(i.attr("href"),i.attr("title"),i.children("img").attr("alt")));d(t)}return this.unbind("click").click(function(){if(e(this).is("a")){t.arrayEl.length=0;t.arrayActEl=0;if(n.length==1&&!t.autoDetect){t.arrayEl.push(new Array(this.getAttribute("href"),this.getAttribute("title"),e(this).children("img").attr("alt")))}else{for(var r=0;r<n.length;r++){t.arrayEl.push(new Array(n[r].getAttribute("href"),n[r].getAttribute("title"),e(n[r]).children("img").attr("alt")))}}while(t.arrayEl[t.arrayActEl][0]!=this.getAttribute("href")){t.arrayActEl++}d(t);return false}})};var t,n,r,i,s,o,u,a,f,l,c,h=x(),p})(jQuery)