(function(e){"use strict";var t={decelerate:true,y:true,x:true,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},n="kinetic-settings";if(!window.requestAnimationFrame){window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()}e.support=e.support||{};e.extend(e.support,{touch:"ontouchend"in document});var r=function(e,t){return Math.floor(Math.abs(e))===0?0:e*t};var i=function(e,t){var n=e;if(e>0){if(e>t){n=t}}else{if(e<0-t){n=0-t}}return n};var s=function(e,t){this.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right);if(e.velocity>0){this.addClass(t.right)}if(e.velocity<0){this.addClass(t.left)}if(e.velocityY>0){this.addClass(t.down)}if(e.velocityY<0){this.addClass(t.up)}};var o=function(e,t){if(typeof t.stopped==="function"){t.stopped.call(e,t)}};var u=function(e,t){var n=e[0];if(t.x&&n.scrollWidth>0){n.scrollLeft=t.scrollLeft=n.scrollLeft+t.velocity;if(Math.abs(t.velocity)>0){t.velocity=t.decelerate?r(t.velocity,t.slowdown):t.velocity}}if(t.y&&n.scrollHeight>0){n.scrollTop=t.scrollTop=n.scrollTop+t.velocityY;if(Math.abs(t.velocityY)>0){t.velocityY=t.decelerate?r(t.velocityY,t.slowdown):t.velocityY}}s.call(e,t,t.deceleratingClass);if(typeof t.moved==="function"){t.moved.call(e,t)}if(Math.abs(t.velocity)>0||Math.abs(t.velocityY)>0){window.requestAnimationFrame(function(){u(e,t)})}else{o(e,t)}};var a=function(t,r){var i=e.kinetic.callMethods[t],s=Array.prototype.slice.call(arguments);if(i){this.each(function(){var t=s.slice(1),r=e(this).data(n);t.unshift(r);i.apply(this,t)})}};var f=function(r){this.addClass("kinetic-active").attr("tabindex","0").each(function(){var o=e.extend({},t,r);var a=e(this),f,l=false,c,h=false,p=false,d,v,m=1e3/o.throttleFPS,g,y;o.velocity=0;o.velocityY=0;a.bind("selectstart",function(){return false});var b=function(){f=false;c=false;p=false};e(document).mouseup(b).click(b);var w=function(){o.velocity=i(l-f,o.maxvelocity);o.velocityY=i(h-c,o.maxvelocity)};var E=function(e,t){p=true;o.velocity=l=0;o.velocityY=h=0;f=e;c=t};var S=function(){if(f!==undefined&&l!==undefined&&o.decelerate===false){o.decelerate=true;w();f=l=p=false;u(a,o)}};var x=function(t,n){if(!g||new Date>new Date(g.getTime()+m)){g=new Date;if(p&&(f||c)){if(y){e(y).blur();y=null;a.focus()}o.decelerate=false;o.velocity=o.velocityY=0;a[0].scrollLeft=o.scrollLeft=o.x?a[0].scrollLeft-(t-f):a[0].scrollLeft;a[0].scrollTop=o.scrollTop=o.y?a[0].scrollTop-(n-c):a[0].scrollTop;l=f;h=c;f=t;c=n;w();s.call(a,o,o.movingClass);if(typeof o.moved==="function"){o.moved.call(a,o)}}}};if(e.support.touch){this.addEventListener("touchstart",function(e){E(e.touches[0].clientX,e.touches[0].clientY)},false);this.addEventListener("touchend",function(e){if(e.preventDefault){e.preventDefault()}S()},false);this.addEventListener("touchmove",function(e){if(e.preventDefault){e.preventDefault()}x(e.touches[0].clientX,e.touches[0].clientY)},false)}else{a.mousedown(function(e){E(e.clientX,e.clientY);y=e.target;e.preventDefault()}).mouseup(function(){S();y=null}).mouseleave(function(){S()}).mousemove(function(e){x(e.clientX,e.clientY);e.preventDefault()}).css("cursor","move")}a.click(function(e){if(Math.abs(o.velocity)>0){e.preventDefault();return false}});a.data(n,o)})};e.kinetic={settingsKey:n,callMethods:{start:function(t,n){var r=e(this);t=e.extend(t,n);if(t){t.decelerate=false;u(r,t)}},end:function(t,n){var r=e(this);if(t){t.decelerate=true}}}};e.fn.kinetic=function(e){if(typeof e==="string"){a.apply(this,arguments)}else{f.call(this,e)}return this}})(window.jQuery||window.Zepto)